<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Learn</title>
    <script src="https://translate.google.com/translate_a/element.js?cb=translatePage"></script>


</head>

<body>
    <textarea id="text" class="text" translate="yes">
        Hello!
    </textarea>
    <script>
        window.onload = () => {
            window.speechSynthesis.getVoices().forEach(v => {
                console.log(v)
            })
        }
        var speech;
        async function translateText() {
            let text = document.getElementById("text").value;
            let targetLang = "yi"; // Yiddish language code

            let url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=${targetLang}&dt=t&q=${encodeURIComponent(text)}`;

            try {
                let response = await fetch(url);
                let result = await response.json();
                setTimeout(() => {
                    speech = new SpeechSynthesisUtterance(result[0].map(item => item[0]).join("")).value;
                    speech.lang = "yi";
                    speechSynthesis.speak(speech);
                }, 1000)

            } catch (error) {
                console.error("Error:", error);
            }
        }
        document.querySelector("textarea").addEventListener("keydown", function (e) {

            if ((e.metaKey || e.ctrlKey) && e.key === "Enter") {
                e.preventDefault()
                translateText();
            }
        });
        function listVoices() {
            const voices = speechSynthesis.getVoices();
            console.log("Available voices:");
            voices.forEach((voice, index) => {
                console.log(`${index + 1}: ${voice.name} (${voice.lang}) ${voice.default ? '[Default]' : ''}`);
            });
        }


    </script>
</body>

</html>